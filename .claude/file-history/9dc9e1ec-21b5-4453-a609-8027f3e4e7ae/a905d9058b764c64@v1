#!/usr/bin/env python3
"""
Lista todos os bancos de dados MySQL disponiveis
"""

import mysql.connector
from mysql.connector import Error
import configparser

# Carregar configuracao
config = configparser.ConfigParser()
config.read('config.ini')

DB_CONFIG = {
    'host': config.get('Database', 'host'),
    'port': config.getint('Database', 'port'),
    'user': config.get('Database', 'user'),
    'password': config.get('Database', 'password')
    # Removido 'database' para conectar sem especificar banco
}

print("Conectando ao MySQL...")
print(f"Host: {DB_CONFIG['host']}:{DB_CONFIG['port']}")
print()

try:
    connection = mysql.connector.connect(**DB_CONFIG)

    if connection.is_connected():
        print("CONEXAO OK!")
        print()

        cursor = connection.cursor()
        cursor.execute("SHOW DATABASES")
        databases = cursor.fetchall()

        print("Bancos de dados disponiveis:")
        print("-" * 40)
        for db in databases:
            print(f"  - {db[0]}")

        cursor.close()
        connection.close()

except Error as e:
    print(f"ERRO: {str(e)}")
